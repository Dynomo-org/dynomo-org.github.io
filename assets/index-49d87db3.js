import{j as e,l as z,_ as B,u as $,r as t,A as H,n as u}from"./main-bac353e0.js";import{u as q,R as v,C as w,F as r,B as x,I as b}from"./index-4b2d0440.js";import G from"./index-a15c34ee.js";import{n as i}from"./notification-03fdcd9a.js";import{S as A}from"./index-cbb1101d.js";import{C as K}from"./index-57296fda.js";import{T as Q}from"./index-416f5d50.js";import{S as C}from"./index-19a60d26.js";import{T as U,M as W}from"./Table-e5f07098.js";import"./index-832cdac1.js";import"./css-b30ff089.js";const _={ads_configs:[{name:"enable_banner",label:"Enable Banner Ad"},{name:"enable_interstitial",label:"Enable Interstitial Ad"},{name:"enable_native",label:"Enable Native Ad"},{name:"enable_open",label:"Enable Open Ad"},{name:"enable_reward",label:"Enable Reward Ad"}],ads_types:[{label:"AdMob",value:"1"}]};const X=()=>e.jsx("div",{className:"loading-overlay-container",children:e.jsx(G,{})}),Y=z(()=>B(()=>import("./index-a15c34ee.js"),["assets/index-a15c34ee.js","assets/main-bac353e0.js","assets/index-cb6ba15e.css","assets/index-832cdac1.js","assets/index-4b2d0440.js","assets/index-416f5d50.js"])),Z={1:"Admob"},ee=[{dataIndex:"id",key:"id"},{dataIndex:"type",key:"type",render:c=>Z[c]}],ue=()=>{const{id:c}=$(),{appStore:{app:{data:a,loading:I},fetchApp:p}}=t.useContext(H),[E,O]=t.useState([]),[d,h]=t.useState(null),[N,k]=t.useState(!1),[T,m]=t.useState(!1),[D,l]=t.useState(!1),[M,f]=t.useState(!1),[y,L]=t.useState(_.ads_types[0].value),[j]=q(),S=t.useMemo(()=>a?{enable_banner:a.enable_banner,enable_interstitial:a.enable_interstitial,enable_native:a.enable_native,enable_open:a.enable_open,enable_reward:a.enable_reward}:{},[a]),V=(s,n)=>{const o={...d,[s]:n};h(o)},F=async()=>{l(!0);const{err:s}=await u.put("app",JSON.stringify({id:a.id,...d}));if(s){i.error(s.message),l(!1);return}await p(c),i.success("Success edit the ads setting"),l(!1)},J=async()=>{l(!0);const s=Object.keys(d).reduce((o,g)=>({...o,[g]:!0}),{id:a.id}),{err:n}=await u.put("app",JSON.stringify(s));if(n){i.error(n.message),l(!1);return}await p(c),i.success("Success edit the ads setting"),l(!1)},R=async()=>{l(!0);const s=Object.keys(d).reduce((o,g)=>({...o,[g]:!1}),{id:a.id}),{err:n}=await u.put("app",JSON.stringify(s));if(n){i.error(n.message),l(!1);return}await p(c),i.success("Success edit the ads setting"),l(!1)},P=async()=>{f(!0);const s={...j.getFieldsValue(),app_id:a.id,type:Number(y)},{err:n}=await u.post("ads",JSON.stringify(s));if(n){i.error(n.message),f(!1);return}i.success("Success adding ads"),f(!1),m(!1)};return t.useEffect(()=>{if(!a){p(c);return}h({enable_banner:a.enable_banner,enable_interstitial:a.enable_interstitial,enable_native:a.enable_native,enable_open:a.enable_open,enable_reward:a.enable_reward})},[a,p,c]),t.useEffect(()=>{k(JSON.stringify(d)!=JSON.stringify(S))},[d,S]),t.useEffect(()=>{a&&(async()=>{const{response:n,err:o}=await u.get(`ads?id=${a.id}`);if(o){i.error(o.message);return}O(n.data)})()},[a]),I||!a?e.jsx(Y,{}):e.jsxs(e.Fragment,{children:[D&&e.jsx(X,{}),e.jsxs(v,{justify:"start",gutter:16,align:"top",children:[e.jsx(w,{span:14,children:e.jsx(A,{size:"large",direction:"vertical",style:{display:"flex"},children:e.jsx(K,{children:d&&e.jsxs(A,{direction:"vertical",size:"small",style:{display:"flex"},children:[e.jsx(Q.Title,{level:4,children:"Ads Configuration"}),e.jsx(r,{labelAlign:"left",labelCol:{span:8},wrapperCol:{span:16},children:_.ads_configs.map(s=>e.jsx(r.Item,{label:s.label,valuePropName:"checked",children:e.jsx(C,{labelInValue:!0,value:{value:d[s.name]},options:[{value:!0,label:"Enable"},{value:!1,label:"Disable"}],onChange:({value:n})=>V(s.name,n)})},s.name))}),e.jsx(v,{justify:"end",children:e.jsxs(A,{size:"middle",children:[e.jsx(x,{type:"primary",onClick:J,children:"Enable All"}),e.jsx(x,{onClick:R,children:"Disable All"}),N&&e.jsx(x,{type:"primary",onClick:F,children:"Save"})]})})]})})})}),e.jsxs(w,{span:10,children:[e.jsx(U,{showHeader:!1,dataSource:E,columns:ee,pagination:!1}),e.jsx(x,{type:"primary",onClick:()=>m(!0),style:{width:"100%",marginTop:16},children:"Add Ads"})]})]}),e.jsx(W,{title:"Add New Ads",open:T,onOk:P,onCancel:()=>m(!1),confirmLoading:M,closable:!1,children:e.jsxs(r,{form:j,labelCol:{span:8},wrapperCol:{span:16},children:[e.jsx(r.Item,{label:"Ads Type",name:"type",valuePropName:"checked",children:e.jsx(C,{labelInValue:!0,value:{value:y},onChange:L,options:_.ads_types})}),e.jsx(r.Item,{label:"Open Ads ID",name:"open_ad_id",children:e.jsx(b,{placeholder:"ca-app-pub-xxxxxx"})}),e.jsx(r.Item,{label:"Banner Ads ID",name:"banner_ad_id",children:e.jsx(b,{placeholder:"ca-app-pub-xxxxxx"})}),e.jsx(r.Item,{label:"Interstitial Ads ID",name:"interstitial_ad_id",children:e.jsx(b,{placeholder:"ca-app-pub-xxxxxx"})}),e.jsx(r.Item,{label:"Reward Ads ID",name:"reward_ad_id",children:e.jsx(b,{placeholder:"ca-app-pub-xxxxxx"})}),e.jsx(r.Item,{label:"Native Ads ID",name:"native_ad_id",children:e.jsx(b,{placeholder:"ca-app-pub-xxxxxx"})})]})})]})};export{ue as default};
