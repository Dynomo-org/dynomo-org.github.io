import{r as o,S as T,n as h,j as e,T as F}from"./main-bac353e0.js";import{F as l,n as i,R as j,C as A,B as w,I as y,c as N}from"./index-4b2d0440.js";import{T as _}from"./index-416f5d50.js";import{T as M,M as k}from"./Table-e5f07098.js";import{I as R}from"./index-d72bf688.js";import{D as O}from"./DeleteOutlined-29057b6d.js";import"./css-b30ff089.js";import"./index-cbb1101d.js";import"./index-19a60d26.js";import"./index-832cdac1.js";const $=({onDelete:d})=>[{dataIndex:"icon_url",key:"icon_url",width:"64px",render:t=>e.jsx(R,{src:t,width:64,height:64})},{dataIndex:"name",key:"id"},{title:"Package Name",dataIndex:"package_name",key:"id"},{title:"Created Date",dataIndex:"created_at",key:"created_at",render:t=>{const r=new Date(t),n={day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"};return new Intl.DateTimeFormat("en-US",n).format(r)}},{title:"Updated Date",dataIndex:"updated_at",key:"updated_at",render:t=>{if(!t)return;const r=new Date(t),n={day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"};return new Intl.DateTimeFormat("en-US",n).format(r)}},{render:t=>e.jsx(j,{children:e.jsx(F,{title:"Delete App",children:e.jsx(w,{type:"primary",shape:"circle",danger:!0,icon:e.jsx(O,{}),onClick:r=>{r.stopPropagation(),d(t)}})})})}],{confirm:q}=k,G=()=>{const[d,t]=o.useState(!1),[r,n]=o.useState([]),[m,u]=o.useState(!1),[D,f]=o.useState(!1),[c]=l.useForm(),b=T(),p=o.useCallback(async()=>{t(!0);const{response:s,err:a}=await h.get("apps");if(a){i.error({title:"Error",description:`Error while getting apps data, please contact the administrator. Message: ${a.message}`}),t(!1);return}n(s.data.apps),t(!1)},[n]),C=s=>({onClick:()=>b(`/apps/${s.id}`)}),I=()=>{c.resetFields(),u(!0)},S=s=>{const a=async()=>{const g=`app?id=${s.id}`,{err:x}=await h.delete(g);if(x){i.error({title:"Error",description:`Error while deleting app, please contact the administrator. Message: ${x.message}`});return}p(),i.success({title:"Success",description:"App Deleted"})};q({title:"Do you want to delete this App?",icon:e.jsx(N,{}),content:"Your action can not be undone",onOk(){a()}})},E=async()=>{try{await c.validateFields()}catch{return}f(!0);const s=c.getFieldsValue(),{err:a}=await h.post("app",JSON.stringify(s));if(console.log(a),a){i.error({title:"Error",description:`Error while creating the app, please contact the administrator. Message: ${a.message}`}),f(!1);return}i.success({title:"Success",description:"App created successfully"}),p(),f(!1),u(!1)};return o.useEffect(()=>{p()},[p]),e.jsxs(e.Fragment,{children:[e.jsxs(j,{justify:"space-between",children:[e.jsx(A,{children:e.jsx(_.Title,{level:3,children:"Apps List"})}),e.jsx(A,{children:e.jsx(w,{type:"primary",onClick:I,children:"Add App"})})]}),e.jsx(M,{loading:d,onRow:C,className:"apps-table",columns:$({onDelete:S}),dataSource:r,rowKey:"id"}),e.jsx(k,{title:"Add a New App",open:m,onOk:E,onCancel:()=>u(!1),confirmLoading:D,closable:!1,children:e.jsxs(l,{form:c,labelCol:{span:8},wrapperCol:{span:16},children:[e.jsx(l.Item,{label:"App Name",name:"app_name",rules:[{required:!0,message:"App Name is Required"}],children:e.jsx(y,{placeholder:"Example"})}),e.jsx(l.Item,{label:"Package Name",name:"package_name",rules:[{required:!0,message:"Package Name is Required"}],children:e.jsx(y,{placeholder:"com.example.example"})})]})})]})};export{G as default};
