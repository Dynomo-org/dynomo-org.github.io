import{aG as k,r as y,aB as e}from"./index-7b017d1f.js";import{j as m,R as x,h as f,e as t,F as u,B as c,L as K,f as F,n as h,g as d}from"./network-e67e298a.js";import{C as g,D as I}from"./DownloadOutlined-4b2ce3e3.js";import{T as _}from"./index-919c1ddd.js";const E={forms:{keystore:[{label:"Alias",name:"alias",required:!0,placeholder:"MyApp"},{label:"Key Password",name:"key_password",required:!0,type:"password"},{label:"Store Password",name:"store_password",required:!0,type:"password"},{label:"Full Name",name:"full_name",required:!0,placeholder:"John Doe"},{label:"Organization",name:"organization"},{label:"Country",name:"country",required:!0,placeholder:"ID"}],style:[{label:"Color Primary",name:"color_primary",required:!0},{label:"Color Primary Variant",name:"color_primary_variant",required:!0},{label:"Color On Primary",name:"color_on_primary",required:!0},{label:"Color Secondary",name:"color_secondary",required:!0},{label:"Color Secondary Variant",name:"color_secondary_variant",required:!0},{label:"Color On Secondary",name:"color_on_secondary",required:!0}],string:[{label:"Set As Wallpaper",name:"set_as_wallpaper",required:!0},{label:"Home Screen",name:"set_wallpaper_home",required:!0},{label:"Lock Screen",name:"set_wallpaper_lock",required:!0},{label:"Home + Lock Screen",name:"wallpaper_both",required:!0},{label:"Cancel",name:"cancel",required:!0},{label:"Set Wallpaper Success",name:"success_set_wallpaper",required:!0},{label:"Exit Message",name:"exit_message",required:!0},{label:"No Connection Message",name:"no_connection_message",required:!0},{label:"Privacy Policy Text",name:"privacy_policy_text"}]}},P=500,z=1,L=2,b=n=>n.map((r,a)=>e.jsx(u.Item,{label:r.label,name:r.name,rules:[{required:r.required,message:`${r.label} is Required`}],children:e.jsx(F,{placeholder:r.placeholder,type:r.type||"text"})},a)),{forms:j}=E,B=()=>{const{id:n}=k(),[r,a]=y.useState(!1),[p,q]=y.useState(""),[o]=m(),[w]=m(),S=async()=>{try{await o.validateFields()}catch{return}a(!0);const i={app_id:n,...o.getFieldsValue()},{err:l}=await h.post("keystore",JSON.stringify(i));if(l){d.error({title:"Error",description:"Error While Initiating Keystore"}),a(!1);return}C()},C=async()=>{const i=`keystore?app_id=${n}`,l=setInterval(async()=>{const{response:s,err:v}=await h.get(i);if(v){clearInterval(l);return}if(s.data.status==z){q(s.data.url),d.success({title:"Success",description:"Keystore generated successfully"}),a(!1),clearInterval(l);return}else if(s.data.status==L){d.error({title:"Error",description:`Error Generating Keystore, Error: ${s.data.error_message}`}),a(!1),clearInterval(l);return}},P)};return e.jsxs(x,{justify:"start",gutter:16,align:"top",children:[e.jsx(f,{xs:24,md:12,children:e.jsx(t,{size:"large",direction:"vertical",style:{display:"flex"},children:e.jsx(g,{children:e.jsxs(t,{direction:"vertical",size:"small",style:{display:"flex"},children:[e.jsx(_.Title,{level:4,children:"Keystore"}),e.jsx(u,{form:o,labelAlign:"left",labelCol:{span:8},wrapperCol:{span:16},children:b(j.keystore)}),e.jsx(x,{justify:"end",children:e.jsxs(t,{size:"middle",children:[e.jsx(c,{onClick:()=>o.resetFields(),children:"Reset"}),e.jsx(c,{type:"primary",onClick:S,icon:r&&e.jsx(K,{}),children:r?"Generating":"Generate"}),p&&e.jsx("a",{href:p,children:e.jsx(c,{type:"primary",danger:!0,icon:e.jsx(I,{}),children:"Download"})})]})})]})})})}),e.jsx(f,{xs:24,md:12,children:e.jsx(t,{direction:"vertical",size:"large",style:{display:"flex"},children:e.jsx(g,{children:e.jsxs(t,{direction:"vertical",size:"small",style:{display:"flex"},children:[e.jsx(_.Title,{level:4,children:"Build"}),e.jsx(u,{form:w,labelAlign:"left",labelCol:{span:8},wrapperCol:{span:16},children:b(j.style)})]})})})})]})};export{B as default};
